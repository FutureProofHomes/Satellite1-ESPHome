globals:
  - id: improv_ble_in_progress
    type: bool
    restore_value: no
    initial_value: 'false'

wifi:
  id: wifi_id
  on_connect:
    - lambda: id(improv_ble_in_progress) = false;
    - script.execute: control_leds
  on_disconnect:
    - script.execute: control_leds

improv_serial:
  on_action:
    then:
      - if:
          condition:
            lambda: return x.get_action() == std::string("RESET_XMOS");
          then:
            - satellite1.xmos_hardware_reset:
      - if:
          condition:
            lambda: return x.get_action() == std::string("ERASE_XMOS_FLASH");
          then:
            - memory_flasher.erase:

      - if:
          condition:
            lambda: return x.get_action() == std::string("FLASH_XMOS_EMBEDDED");
          then:
            - memory_flasher.write_embedded_image:
          
          
      

